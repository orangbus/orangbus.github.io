(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{536:function(a,s,t){"use strict";t.r(s);var e=t(11),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("Dockerfile")]),a._v(" "),t("ul",[t("li",[a._v("from 基础镜像")]),a._v(" "),t("li",[a._v("label 标签")]),a._v(" "),t("li",[a._v("run 执行命令并创建新的image layer")]),a._v(" "),t("li",[a._v("workdir 除了设置文件目录")]),a._v(" "),t("li",[a._v("add 添加并解压")]),a._v(" "),t("li",[a._v("copy 复制文件")]),a._v(" "),t("li",[a._v("env")]),a._v(" "),t("li",[a._v("volume")]),a._v(" "),t("li",[a._v("network")]),a._v(" "),t("li",[a._v("cmd 设置容器"),t("strong",[a._v("启动后")]),a._v("执行的命令")]),a._v(" "),t("li",[a._v("entrypoint 设置同期"),t("strong",[a._v("启动时")]),a._v("运行的命令")])]),a._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" centos\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("LABEL")]),a._v(" author=orangbus\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RUN")]),a._v(" yum install "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("y vim\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WORKDIR")]),a._v(" /home/Code\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ENV")]),a._v(" PHP_VERSION 7.4\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RUN")]),a._v(" yum install "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("y mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("server="),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"${PHP_VERSION}"')]),a._v("\n")])])]),t("p",[t("strong",[a._v("shell:")]),a._v(" entrypoint echo $name")]),a._v(" "),t("p",[t("strong",[a._v("exec:")]),a._v('  entrypoint ["/bin/bash","-c","echo $name"]')]),a._v(" "),t("p",[a._v("删除退出的容器")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker rm $(docker ps -qa)\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('## emby \nEMBY_IMAGE=emby/embyserver\nEMBY_HTTP_PORT=8085\nEMBY_HTTPS_PORT=8086\nEMBY_CONFIG_PATH=./emby/config\nEMBY_SHAREDIR_PATH=./emby/gd\n\n# emby\n    emby:\n      container_name: emby\n      image: ${EMBY_IMAGE}\n      restart: always\n      ports:\n      - "${EMBY_HTTP_PORT}:8096"\n      - "${EMBY_HTTPS_PORT}:8920"\n      environment:\n        UID: 1000\n        GID: 100\n        GIDLIST: 100\n        DEVICE: /dev/dri:/dev/dri\n        RUNTIME: nvidia\n      volumes:\n      - ${EMBY_CONFIG_PATH}:/config\n      - ${EMBY_SHAREDIR_PATH}:/mnt/gd\n')])])]),t("h1",{attrs:{id:"docker网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker网络"}},[a._v("#")]),a._v(" docker网络")]),a._v(" "),t("h2",{attrs:{id:"bridge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bridge"}},[a._v("#")]),a._v(" bridge")]),a._v(" "),t("p",[a._v("通过宿主机和docker0网络转换")]),a._v(" "),t("h2",{attrs:{id:"host"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#host"}},[a._v("#")]),a._v(" host")]),a._v(" "),t("p",[a._v("公用宿主机的网络接口")]),a._v(" "),t("h2",{attrs:{id:"容器互联"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器互联"}},[a._v("#")]),a._v(" 容器互联")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run  --name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("demo1 -d nginx\n")])])]),t("p",[a._v("如果我们在创建一个docker容器，想直接通过容器名称连接可以通过"),t("code",[a._v("--link")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker create --name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("demo2 --link"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("demo1\n")])])]),t("p",[a._v("当demo2想要跟demo1互通，可以这样")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run  --name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("demo2 -d nginx\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ping")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.17")]),a._v(".1.1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# demo1 ip")]),a._v("\n// or\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ping")]),a._v(" demo1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这样可是可ping通的")]),a._v("\n")])])]),t("p",[a._v("同一个"),t("code",[a._v("brige")]),a._v(" 可以通过容器名称互通（类似域名）")]),a._v(" "),t("h1",{attrs:{id:"docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[a._v("#")]),a._v(" docker-compose")]),a._v(" "),t("blockquote",[t("p",[a._v("参数说明参考：https://www.cnblogs.com/wutao666/p/11332186.html")])]),a._v(" "),t("p",[a._v("多个nginx做负载均衡，可以使用paproxy做负载均衡即可")]),a._v(" "),t("h2",{attrs:{id:"保持后台运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保持后台运行"}},[a._v("#")]),a._v(" 保持后台运行")]),a._v(" "),t("p",[a._v("当我们运行一个 "),t("code",[a._v("container")]),a._v(" 没有后台守护进程的时候，可以添加"),t("code",[a._v("tty")]),a._v(" 参数保持容器处于 "),t("code",[a._v("up")]),a._v(" 状态")]),a._v(" "),t("div",{staticClass:"language-yml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[a._v("  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("busybox")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("networks")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" scrapy\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("tty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 保持后台运行")]),a._v("\n")])])]),t("h2",{attrs:{id:"command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command"}},[a._v("#")]),a._v(" command")]),a._v(" "),t("p",[a._v("容器启动后执行的命令")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("command:bundle "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" thin -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v("\n")])])]),t("p",[a._v("该命令也可以是一个列表，方式类似于dockerfile：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("command:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bundle"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"exec"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"thin"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-p"')]),a._v(",``"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"3000"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h1",{attrs:{id:"harbor搭建个人仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#harbor搭建个人仓库"}},[a._v("#")]),a._v(" harbor搭建个人仓库")]),a._v(" "),t("blockquote",[t("p",[a._v("https://www.cnblogs.com/wutao666/p/11301519.html")])])])}),[],!1,null,null,null);s.default=n.exports}}]);