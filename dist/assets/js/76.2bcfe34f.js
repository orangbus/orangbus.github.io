(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{573:function(a,s,t){"use strict";t.r(s);var n=t(11),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"架构图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#架构图"}},[a._v("#")]),a._v(" 架构图")]),a._v(" "),t("h2",{attrs:{id:"vagrant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vagrant"}},[a._v("#")]),a._v(" vagrant")]),a._v(" "),t("p",[a._v("使用Vagrant的快照功能可以很方便快速的创建当前虚拟机的一个临时备份状态，在进行重要操作时可以先创建一个快照以便在操作失误后快速恢复。")]),a._v(" "),t("p",[a._v("安装Vagrant快照插件：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("vagrant plugin "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" vagrant-vbox-snapshot\n$ vagrant snapshot\nUsage: vagrant snapshot "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("args"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\nAvailable subcommands:\n     back\n     delete\n     go\n     list\n     take\n\nFor "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v(" on any individual "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v(" run `vagrant snapshot "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -h\n")])])]),t("p",[a._v("使用方法：")]),a._v(" "),t("ul",[t("li",[a._v("创建一个快照")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("vagrant snapshot take "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Name"')]),a._v("\n")])])]),t("ul",[t("li",[a._v("查看快照列表")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("vagrant snapshot list\n")])])]),t("ul",[t("li",[a._v("从指定快照中恢复")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("vagrant snapshot go "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Name"')]),a._v("\n")])])]),t("ul",[t("li",[a._v("删除一个快照")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("vagrant snapshot delete "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Name"')]),a._v("\n")])])]),t("h2",{attrs:{id:"环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),t("p",[a._v("ubuntu:2010")]),a._v(" "),t("p",[a._v("php:8.0")]),a._v(" "),t("h2",{attrs:{id:"ssh连接服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh连接服务器"}},[a._v("#")]),a._v(" ssh连接服务器")]),a._v(" "),t("p",[a._v("ssh key生成")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("ssh-keygen -t rsa -C "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your_email@example.com"')]),a._v("\n")])])]),t("p",[a._v("将公钥复制到远程主机中")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("ssh-copy-id root@192.168.3.100  // 回车后输入密码\nssh-copy-id vagrant@192.168.3.101  // 回车后输入密码\nssh-copy-id vagrant@192.168.3.102  // 回车后输入密码\nssh-copy-id vagrant@192.168.3.103  // 回车后输入密码\n")])])]),t("h2",{attrs:{id:"必要软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#必要软件"}},[a._v("#")]),a._v(" 必要软件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" update \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" php composer nginx\n")])])]),t("h2",{attrs:{id:"域名设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#域名设置"}},[a._v("#")]),a._v(" 域名设置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("192.168.3.100 app.laravel.com\n192.168.3.101 app1.laravel.com\n192.168.3.102 app2.laravel.com\n192.168.3.103 mysql.laravel.com\n")])])]),t("h2",{attrs:{id:"nginx反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx反向代理"}},[a._v("#")]),a._v(" nginx反向代理")]),a._v(" "),t("p",[a._v("网站目录：/var/www/")]),a._v(" "),t("p",[a._v("nginx配置文件：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("composer "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --no-dev\n\nphp artisan migrate --fo\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);