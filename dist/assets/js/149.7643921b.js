(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{659:function(n,t,e){"use strict";e.r(t);var a=e(11),s=Object(a.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[n._v("​\t\t昨天晚上打算早点睡觉的，可万万没想到，有人告诉我我的电脑还没有关，我很纳闷的起来看了下，明明已经关闭了，后来再次躺下的时候才想起来是楼上的一台老旧的电脑（安装Centos系统），那是我用来做测试的，后来测试完了就忘记关闭了。于是脑子就东西吧，没事就喜欢瞎想，家里一台Centos跑一个测试服务也太浪费资源了吧，能不能配一个多站点呢？这样一来我就可以挂在更多的web服务，于是去网上一搜，虽然没有找到满意的教程，但是一个关键词让我产生新的想法，那就是【反向代理】，话不多说，我们操练起来。")]),n._v(" "),e("p",[n._v("前期准备：")]),n._v(" "),e("ul",[e("li",[n._v("一台linux系统，连接网线，知道 IP 地址")]),n._v(" "),e("li",[n._v("有一个nginx基础，对反向代理有一个概念")]),n._v(" "),e("li",[n._v("有一点docker基础，我全程是用 laradock操作的，但是配置和lnmp差不多吧【非必要的】")])]),n._v(" "),e("h2",{attrs:{id:"安装laradock"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装laradock"}},[n._v("#")]),n._v(" 安装Laradock")]),n._v(" "),e("p",[n._v("github：https://github.com/orangbus/tool")]),n._v(" "),e("h2",{attrs:{id:"配置nginx反向代理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx反向代理"}},[n._v("#")]),n._v(" 配置nginx反向代理")]),n._v(" "),e("ul",[e("li",[e("p",[n._v("修改host ："),e("code",[n._v("sudo vim /etc/hosts")])]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("127.0.0.1 localhost  //对应 default.conf文件\n127.0.0.1 dev.laravel.com  //对应 laravel.conf文件\n....\n")])])])]),n._v(" "),e("li",[e("p",[n._v("配置 nginx config文件")]),n._v(" "),e("p",[n._v("我们为每个站点单独配置一份 "),e("code",[n._v("xx.conf")]),n._v(" 文件,然后找到默认的nginx配置文件，比如我的是 "),e("code",[n._v("default.conf")]),n._v(" 这个是默认站点的配置文件")]),n._v(" "),e("p",[n._v("【default.conf】默认配置文件")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("server {\n    listen 80 default_server;\n    listen [::]:80 default_server ipv6only=on;\n    \n    # For https\n    # listen 443 ssl default_server;\n    # listen [::]:443 ssl default_server ipv6only=on;\n    # ssl_certificate /etc/nginx/ssl/default.crt;\n    # ssl_certificate_key /etc/nginx/ssl/default.key;\n\n    server_name localhost;\n    root /var/www/default/;\n    index index.php index.html index.htm;\n\n    location / {\n         try_files $uri $uri/ /index.php$is_args$args;\n    }\n\n    location ~ \\.php$ {\n        try_files $uri /index.php =404;\n        fastcgi_pass php-upstream;\n        fastcgi_index index.php;\n        fastcgi_buffers 16 16k;\n        fastcgi_buffer_size 32k;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        #fixes timeouts\n        fastcgi_read_timeout 600;\n        include fastcgi_params;\n    }\n\n    location ~ /\\.ht {\n        deny all;\n    }\n\n    location /.well-known/acme-challenge/ {\n        root /var/www/letsencrypt/;\n        log_not_found off;\n    }\n}\n")])])]),e("p",[n._v("【laravel.conf】配置文件")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("\n")])])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);