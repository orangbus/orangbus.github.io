(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{670:function(t,a,s){"use strict";s.r(a);var _=s(11),e=Object(_.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("配套仓库地址："),s("a",{attrs:{href:"https://gitee.com/orangbus/mysql-cluster",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gitee.com/orangbus/mysql-cluster"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"jdk8安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdk8安装"}},[t._v("#")]),t._v(" jdk8安装")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export JAVA_HOME=/usr/java/jdk1.8.0_291\nexport CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib\nexport PATH=$JAVA_HOME/bin:$PATH\n")])])]),s("h2",{attrs:{id:"mycat读写分离"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mycat读写分离"}},[t._v("#")]),t._v(" mycat读写分离")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("主机")]),t._v(" "),s("th",[t._v("端口")]),t._v(" "),s("th",[t._v("容器名称")]),t._v(" "),s("th",[t._v("角色")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("192.168.3.14")]),t._v(" "),s("td",[t._v("3336")]),t._v(" "),s("td",[t._v("mycat2_master_1")]),t._v(" "),s("td",[t._v("master")])]),t._v(" "),s("tr",[s("td",[t._v("192.168.3.14")]),t._v(" "),s("td",[t._v("3337")]),t._v(" "),s("td",[t._v("mycat2_slave_1")]),t._v(" "),s("td",[t._v("slave")])])])]),t._v(" "),s("p",[t._v("注意点：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("mycat 授权")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" mycat\n")])])])]),t._v(" "),s("li",[s("p",[t._v("基本的链接信息没有错误")])]),t._v(" "),s("li",[s("p",[t._v("启动顺序：master -> slave -> mycat (挨个能连接之后再启动下一个，不然会链接出错)")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/image-20210727170613097.png",alt:"image-20210727170613097"}})])])]),t._v(" "),s("h2",{attrs:{id:"mycat切片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mycat切片"}},[t._v("#")]),t._v(" mycat切片")]),t._v(" "),s("p",[t._v("基于 mycat2 来做的")]),t._v(" "),s("p",[t._v("集群1")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("主机")]),t._v(" "),s("th",[t._v("端口")]),t._v(" "),s("th",[t._v("容器名称")]),t._v(" "),s("th",[t._v("角色")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("192.168.3.14")]),t._v(" "),s("td",[t._v("3346")]),t._v(" "),s("td",[t._v("mycat3_master_1")]),t._v(" "),s("td",[t._v("master")])]),t._v(" "),s("tr",[s("td",[t._v("192.168.3.14")]),t._v(" "),s("td",[t._v("3347")]),t._v(" "),s("td",[t._v("mycat3_slave_1")]),t._v(" "),s("td",[t._v("slave")])])])]),t._v(" "),s("p",[t._v("集群2")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("主机")]),t._v(" "),s("th",[t._v("端口")]),t._v(" "),s("th",[t._v("容器名称")]),t._v(" "),s("th",[t._v("角色")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("192.168.3.14")]),t._v(" "),s("td",[t._v("3348")]),t._v(" "),s("td",[t._v("mycat3_master_1")]),t._v(" "),s("td",[t._v("master")])]),t._v(" "),s("tr",[s("td",[t._v("192.168.3.14")]),t._v(" "),s("td",[t._v("3349")]),t._v(" "),s("td",[t._v("mycat3_slave_1")]),t._v(" "),s("td",[t._v("slave")])])])]),t._v(" "),s("h3",{attrs:{id:"授权文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#授权文件"}},[t._v("#")]),t._v(" 授权文件")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("bash:  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 当前文件")]),t._v("\nconfig  data  docker-compose.yml  mycat  mycat2  readme.md\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" mycat mycat2\n")])])]),s("h3",{attrs:{id:"错误处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误处理"}},[t._v("#")]),t._v(" 错误处理")]),t._v(" "),s("p",[s("strong",[t._v("权限不足")])]),t._v(" "),s("blockquote",[s("p",[t._v("mycat2_1   | Unable to locate any of the following operational binaries:\nmycat2_1   |   /usr/local/mycat/bin/./wrapper-linux-x86-64 (Found but not executable.)\nmycat2_1   |   /usr/local/mycat/bin/./wrapper-linux-x86-32 (Found but not executable.)\nmycat2_1   |   /usr/local/mycat/bin/./wrapper")])]),t._v(" "),s("p",[s("strong",[t._v("解决办法：")]),t._v(" 授权mycat整个文件权限")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" mycat2 \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除之前错误的容器")]),t._v("\ndocker-compose "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" mycat2\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新创建")]),t._v("\ndocker-compose build --no-cache mycat2\n\ndocker-compose up -d mycat2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" docker-compose logs -f mycat2 \n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);