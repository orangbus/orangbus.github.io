(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{500:function(a,t,s){a.exports=s.p+"assets/img/movie.89bdb9dc.jpg"},618:function(a,t,s){"use strict";s.r(t);var e=s(11),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("本站采用前后端分离的架构模式。")]),a._v(" "),e("div",{staticStyle:{"text-align":"center"}},[a._v("架构图")]),a._v(" "),e("p",[e("img",{attrs:{src:s(500),alt:""}})]),a._v(" "),e("p",[a._v("整体来说至少需要两个域名：")]),a._v(" "),e("p",[a._v("主域名：movie.test  （部署Laravel代码）")]),a._v(" "),e("p",[a._v("后台管理：admin.movie.test （后台管理代码）")]),a._v(" "),e("p",[a._v("Ps: 由于使用了laravel的前端脚手架，所以默认的前端模板已经集成在Laravel项目中。")]),a._v(" "),e("h1",{attrs:{id:"获取相关代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取相关代码"}},[a._v("#")]),a._v(" 获取相关代码")]),a._v(" "),e("p",[a._v("OrangBus交流群："),e("a",{attrs:{href:"https://jq.qq.com/?_wv=1027&k=5UQXtUm",target:"_blank",rel:"noopener noreferrer"}},[a._v("511300462"),e("OutboundLink")],1)]),a._v(" "),e("p",[a._v("环境要求：")]),a._v(" "),e("p",[a._v("nginx:1.2x+")]),a._v(" "),e("p",[a._v("php: 8.0+ (依赖redis扩展)")]),a._v(" "),e("p",[a._v("mysql: 5.7+")]),a._v(" "),e("p",[a._v("redis: 6.0+")]),a._v(" "),e("p",[a._v("composer 2.0+")]),a._v(" "),e("h1",{attrs:{id:"一、laravel-部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、laravel-部署"}},[a._v("#")]),a._v(" 一、Laravel 部署")]),a._v(" "),e("p",[a._v("域名：movie.test")]),a._v(" "),e("h2",{attrs:{id:"_1、下载源代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载源代码"}},[a._v("#")]),a._v(" 1、下载源代码")]),a._v(" "),e("p",[a._v("群里找群主拉你进github开发组")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git clone https://github.com/xxx/laravel.git\n")])])]),e("h2",{attrs:{id:"_2、安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装"}},[a._v("#")]),a._v(" 2、安装")]),a._v(" "),e("p",[a._v("进入项目目录")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("cd laravel\n")])])]),e("p",[a._v("安装扩展已经前端依赖")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("composer "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 打包")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build\n")])])]),e("p",[a._v("配置nginx 伪静态, 展示核心地方")]),a._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try_files")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("php"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$is_args")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$args")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("autoindex")]),a._v(" off"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("复制一个配置文件，填写好对应的mysql，redis数据库信息")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" .env.example .env\n")])])]),e("p",[a._v("如果没有使用elasticsearch，请将下面的配置设置为false")]),a._v(" "),e("div",{staticClass:"language-env extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ENABLE_JOKE_SEARCH=false # 是否开启【段子】搜索\nENABLE_ARTICLE_SEARCH=false # 是否开【文章】启搜索\nENABLE_MOVIE_SEARCH=false # 是否开启【视频】搜索\n")])])]),e("p",[a._v("初始化数据")]),a._v(" "),e("p",[a._v("根目录下有一个"),e("code",[a._v("start.sh")]),a._v(" 脚本，授权执行一下就可以")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("chmod a+x start.sh\n\nbash start.sh\n")])])]),e("p",[e("code",[a._v("选择1")]),a._v("，初始一下数据路等基本信息，最后将后面显示的 CLIENT_ID，CLIENT_SECRET 配置到对应的"),e("code",[a._v(".env")]),a._v(" 文件中")]),a._v(" "),e("p",[a._v("至此后台安装完毕。")]),a._v(" "),e("h2",{attrs:{id:"二、后台管理部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、后台管理部署"}},[a._v("#")]),a._v(" 二、后台管理部署")]),a._v(" "),e("p",[a._v("域名：admin.movie.test")]),a._v(" "),e("p",[a._v("得到源代码后，解压到网站的根目录，配置nginx反向代理")]),a._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try_files")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("admin "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_pass")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("http")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("movie"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("test"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置你自己的laravel项目的域名或者ip")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("h1",{attrs:{id:"后续"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后续"}},[a._v("#")]),a._v(" 后续")]),a._v(" "),e("h2",{attrs:{id:"模板2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模板2"}},[a._v("#")]),a._v(" 模板2")]),a._v(" "),e("p",[a._v("仓库地址："),e("a",{attrs:{href:"https://github.com/orangbus/movie-web",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/orangbus/movie-web"),e("OutboundLink")],1)]),a._v(" "),e("p",[a._v("项目地址有详细配置说明，参考即可")]),a._v(" "),e("h2",{attrs:{id:"集成elasticsearch搜索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集成elasticsearch搜索"}},[a._v("#")]),a._v(" 集成elasticsearch搜索")]),a._v(" "),e("p",[a._v("后期出一个教程吧，如果大家感兴趣可以查看一下这个仓库，可快速搭建一个elk的环境")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://gitee.com/orangbus/docker-elk-stack",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://gitee.com/orangbus/docker-elk-stack"),e("OutboundLink")],1)]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("DB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_DATABASE=movie\nDB_USERNAME=movie\nDB_PASSWORD=mAGTMyKpjx8Hj2Dz\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);