---
title: 切换国内源及讯飞输入法安装
---

> 配置 manjaro 踩了很多坑，什么都可以不说，但是配置中文输入法的坑一定要说下，之前一直执着于搜狗输入法，但是发现源里找不到，然后开始不停地换源尝试，最后还是找不到搜狗输入法，查了查才知道搜狗输入法没上 qt5 被抛弃了，之前用 deepin 时讯飞输入法也很顺手，好奇去 aur 源查了查，果然有人上传了讯飞的包，那不如用讯飞来代替一下搜狗输入法吧。

1. 配置镜像源:

```
sudo pacman-mirrors -i -c China -m rank

```

2. 设置 archlinuxcn 源, antergos 源, arch4edu 源:

```
sudo nano /etc/pacman.conf

```

```
[archlinuxcn]#选一个就行了
SigLevel = Optional TrustedOnly
#中科大源
Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
#清华源
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch

[antergos]
SigLevel = TrustAll
Server = https://mirrors.tuna.tsinghua.edu.cn/antergos/$repo/$arch

[arch4edu]
SigLevel = TrustAll
Server = https://mirrors.tuna.tsinghua.edu.cn/arch4edu/$arch

```

3. 更新源列表

```
sudo pacman-mirrors -g

```

4. 更新 pacman 数据库并全面更新系统

```
sudo pacman -Syyu

```

5. 防止 PGP 签名错误

```
sudo pacman -S archlinuxcn-keyring
sudo pacman -S antergos-keyring

```

6. 为了安装使用 aur 方便，也可以额外安装一下 yaourt

```
sudo pacman -S yaourt

```

7.yaourt 用户  
添加之前首先备份原文件

```
cp /etc/yaourtrc /etc/yaourtrc.backup

```

修改 /etc/yaourtrc 配置文件

```
nano /etc/yaourtrc

```

去掉 # AURURL 的注释, 并修改

```
AURURL=“https://aur.tuna.tsinghua.edu.cn”

```

8.yay 用户

执行以下命令修改 aururl :

```
yay --aururl “https://aur.tuna.tsinghua.edu.cn” --save

```

```
yay -S iflyime

```

这里非常重要，否则可能装上了输入法也切换不了中文输入。  
我这里时 KDE 的桌面这样配置，不同的桌面据说配置方法是不一样的，还是多尝试一下吧。

```
//回到home目录
cd ~
vim .xprofile
//写入
export GTK_IM_MODULE=fcitx  
export QT_IM_MODULE=fcitx 
export XMODIFIERS=@im=fcitx

```

注销后登录，就可以愉快打字啦。

