# 架构图

## vagrant

使用Vagrant的快照功能可以很方便快速的创建当前虚拟机的一个临时备份状态，在进行重要操作时可以先创建一个快照以便在操作失误后快速恢复。

安装Vagrant快照插件：

```bash
vagrant plugin install vagrant-vbox-snapshot
$ vagrant snapshot
Usage: vagrant snapshot <command> [<args>]

Available subcommands:
     back
     delete
     go
     list
     take

For help on any individual command run `vagrant snapshot <command> -h
```

使用方法：

- 创建一个快照

```bash
vagrant snapshot take "Name"
```

- 查看快照列表

```bash
vagrant snapshot list
```

- 从指定快照中恢复

```bash
vagrant snapshot go "Name"
```

- 删除一个快照

```bash
vagrant snapshot delete "Name"
```

## 环境准备

ubuntu:2010

php:8.0



## ssh连接服务器

ssh key生成

```bash
ssh-keygen -t rsa -C "your_email@example.com"
```

将公钥复制到远程主机中

```bash
ssh-copy-id root@192.168.3.100  // 回车后输入密码
ssh-copy-id vagrant@192.168.3.101  // 回车后输入密码
ssh-copy-id vagrant@192.168.3.102  // 回车后输入密码
ssh-copy-id vagrant@192.168.3.103  // 回车后输入密码
```

## 必要软件

```bash
sudo apt-get update 

apt-get install vim wget git php composer nginx
```



## 域名设置

```
192.168.3.100 app.laravel.com
192.168.3.101 app1.laravel.com
192.168.3.102 app2.laravel.com
192.168.3.103 mysql.laravel.com
```



## nginx反向代理

网站目录：/var/www/

nginx配置文件：



```bash
composer install --no-dev

php artisan migrate --fo
```























