(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{603:function(t,s,a){"use strict";a.r(s);var n=a(11),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_1、路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、路由"}},[t._v("#")]),t._v(" 1、路由")]),t._v(" "),a("p",[t._v("不同的端接口使用不同的 "),a("code",[t._v("route")]),t._v(" 文件，防止接口过多难以管理")]),t._v(" "),a("p",[t._v("web.php: 前端页面显示")]),t._v(" "),a("p",[t._v("api.php : 手机端接口路由地址")]),t._v(" "),a("p",[t._v("admin.php : 后台管理员接口路由地址")]),t._v(" "),a("p",[t._v("示例")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".\n├── api.php\n├── channels.php\n├── console.php\n├── mobile.php\n└── web.php\n")])])]),a("p",[t._v("每个模块对应一个 "),a("code",[t._v("Route::group()")]),t._v(" ，每个独立的模块对应一个目录的控制器文件")]),t._v(" "),a("p",[t._v("示例")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".\n├── Api\n│   ├── ApplyForm\n│   │   └── Index.php\n│   ├── Article\n│   │   ├── ArticleInclude.php\n│   │   ├── Cate.php\n│   │   ├── Index.php\n│   │   ├── Spider.php\n│   │   ├── Sync.php\n│   │   └── Tags.php\n│   ├── Auth\n│   │   ├── NodeAuth.php\n│   │   └── RoleAuth.php\n│   ├── Banner\n│   │   └── Index.php\n│   ├── Dictionary\n│   │   └── Index.php\n│   ├── FriendLink\n│   │   └── Index.php\n│   ├── Index\n│   │   └── Index.php\n│   ├── Log\n│   │   ├── Index.php\n│   │   └── Login.php\n│   ├── Login.php\n│   ├── NavBar\n│   │   └── Index.php\n│   ├── School\n│   │   ├── Cate.php\n│   │   ├── Index.php\n│   │   └── Tags.php\n│   ├── Setting\n│   │   └── Index.php\n│   ├── User\n│   │   └── Index.php\n│   └── Website\n│       └── Index.php\n├── Auth\n│   ├── ConfirmPasswordController.php\n│   ├── ForgotPasswordController.php\n│   ├── LoginController.php\n│   ├── RegisterController.php\n│   ├── ResetPasswordController.php\n│   └── VerificationController.php\n├── Controller.php\n├── HomeController.php\n├── Minio\n│   ├── Cate.php\n│   └── Index.php\n├── Mobile\n│   ├── ApplyForm\n│   │   └── Index.php\n│   ├── Article\n│   │   ├── Index.php\n│   │   └── Tag.php\n│   ├── Index\n│   │   └── Index.php\n│   └── School\n│       └── Index.php\n├── Utils\n│   └── Index\n│       └── Index.php\n└── Web\n    ├── ApplyForm\n    │   └── Index.php\n    ├── Article\n    │   ├── Cate.php\n    │   ├── Index.php\n    │   └── Tag.php\n    ├── Demo\n    │   └── Index.php\n    ├── Index\n    │   └── Index.php\n    └── School\n        └── Index.php\n\n")])])]),a("h1",{attrs:{id:"_2、表规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、表规范"}},[t._v("#")]),t._v(" 2、表规范")]),t._v(" "),a("p",[t._v("所有的表创建或者更改都应该对应一个migration文件，在团队协作中，无论任何人执行"),a("strong",[t._v("相同的操作")]),t._v("，得到的表结构都是"),a("strong",[t._v("一致")]),t._v("的")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("├── 2014_10_12_000000_create_users_table.php\n├── 2014_10_12_100000_create_password_resets_table.php\n├── 2019_08_19_000000_create_failed_jobs_table.php\n├── 2019_12_14_000001_create_personal_access_tokens_table.php\n├── 2023_01_01_135241_create_articles_table.php\n├── 2023_01_02_012408_create_frind_links_table.php\n├── 2023_01_02_012719_create_websites_table.php\n├── 2023_01_02_013111_create_admins_table.php\n├── 2023_01_03_024948_create_schools_table.php\n├── 2023_01_03_032723_create_article_cates_table.php\n├── 2023_01_03_062732_create_minio_clouds_table.php\n")])])]),a("p",[t._v("同业务的相关的表以【主表_副表】的规范命名")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".\n├── Admin.php\n├── ApplyForm.php\n├── ArticleCate.php\n├── ArticleInclude.php\n├── Article.php\n├── ArticleSync.php\n├── ArticleTag.php\n├── BaiduIncludeLog.php\n├── BaiduIncludeTask.php\n├── BaiduPush.php\n├── Banner.php\n├── BaseModel.php\n├── Dictionary.php\n├── FrindLink.php\n├── LoginLog.php\n├── MinioCate.php\n├── MinioCloud.php\n├── NavBar.php\n├── Node.php\n├── Role.php\n├── SchoolCate.php\n├── School.php\n├── SchoolTag.php\n├── Setting.php\n├── SiteLog.php\n├── SpiderArticle.php\n├── UserArticle.php\n├── User.php\n└── Website.php\n")])])]),a("p",[t._v("参考以上可看出")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Article.php\nArticleCate.php\nArticleInclude.php\nArticleSync.php\nArticleTag.php\n")])])]),a("p",[t._v("这些表都是跟文章相关的，以文章【articles】为主表，文章相关的分类表【article_cates】,文章标签【article_tags】,以此类推，可快速看出表关系。")]),t._v(" "),a("p",[t._v("如果是文章关联用户，则【article_user】,【主表_副表】的形式表现，如果是用户关联其它的表统计，则【user_order】【user_login_log】形式。")]),t._v(" "),a("h1",{attrs:{id:"_3、代码更新升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、代码更新升级"}},[t._v("#")]),t._v(" 3、代码更新升级")]),t._v(" "),a("p",[t._v("程序升级主要分为三部分")]),t._v(" "),a("h2",{attrs:{id:"_1、代码同步更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、代码同步更新"}},[t._v("#")]),t._v(" 1、代码同步更新")]),t._v(" "),a("p",[t._v("使用git管理，跟新代码时只需要 "),a("code",[t._v("git pull")]),t._v(" 即可")]),t._v(" "),a("h2",{attrs:{id:"_2、表同步更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、表同步更新"}},[t._v("#")]),t._v(" 2、表同步更新")]),t._v(" "),a("p",[t._v("每个表对应一个migration文件，最终只需要执行："),a("code",[t._v("php artisan migration")]),t._v(" 即可完成表更新，如果是一些正在使用的表，不能只用 migration的形式升级，可创建一个seed，更新的时候指定seed即可。")]),t._v(" "),a("h2",{attrs:{id:"_3、配置文件更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、配置文件更新"}},[t._v("#")]),t._v(" 3、配置文件更新")]),t._v(" "),a("p",[t._v("在实际开发中，我们可能需要多个服务配合使用，如")]),t._v(" "),a("p",[t._v("1、文件上传：使用独立的对象存储oss")]),t._v(" "),a("p",[t._v("2、搜索：使用elasticsearch")]),t._v(" "),a("p",[t._v("3、缓存：redis")]),t._v(" "),a("p",[t._v("4、消息队列：Redis ，mq等")]),t._v(" "),a("p",[t._v("...............................")]),t._v(" "),a("p",[t._v("每个第三方的独立程序因该有对应的安装及部署的说明，每个人安装文档执行同样的操作可搭建一个相同的环境出来。")]),t._v(" "),a("h1",{attrs:{id:"_4、代码规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、代码规范"}},[t._v("#")]),t._v(" 4、代码规范")]),t._v(" "),a("p",[t._v("在laravel中，建议根据 【服务端/功能/实现方法】建立对应的控制器")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("├── Api # 手机接口服务端\n│   ├── ApplyForm # 表单功能\n│   │   └── Index.php \n│   ├── Article # 文章功能\n│   │   ├── ArticleInclude.php\n│   │   ├── Cate.php # 文章分类相关的实现方法\n│   │   ├── Index.php\n│   │   ├── Spider.php\n│   │   ├── Sync.php\n│   │   └── Tags.php # 文章标签相关的实现方法\n└── Web # 网页端\n    ├── ApplyForm\n    │   └── Index.php\n    ├── Article\n    │   ├── Cate.php\n    │   ├── Index.php\n    │   └── Tag.php\n    ├── Demo\n    │   └── Index.php\n    ├── Index\n    │   └── Index.php\n    └── School\n        └── Index.php\n")])])]),a("p",[t._v("这样可对每个功能模块进行快速的定位以及升级迭代。")]),t._v(" "),a("p",[t._v("对不同的状态返回，统一使用枚举的方式")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Created by OrangBus\n * User email: orangbus40400@gmail.com\n * website: orangbus.cn\n * blog: doc.orangbus.cn\n * github: github.com/orangbus\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Enum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 自定义响应 成功|失败 错误状态码\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpResponseEnum")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回成功状态码")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" SuccessCode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回失败错误状态码")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ErrorCode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("202")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认返回成功消息提示")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" SuccessMessage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"ok"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//默认失败返回消息提示")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ErrorMessage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保存成功提示")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" SaveMessage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"保存成功！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除成功提示")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" DeleteMessage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"删除成功！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),a("p",[t._v("不同的错误使用相应的异常去处理")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 表单验证异常")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValidationException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wantsJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("202")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 业务异常")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BusinessException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wantsJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必要参数为空异常")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArgumentEmptyException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wantsJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ErrorException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wantsJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 未登录,未授权")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wantsJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("419")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("当后台想收集不同类型的错误时，只需要找到最后的异常处理的时候记录数据库即可。")]),t._v(" "),a("h1",{attrs:{id:"_5、服务部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、服务部署"}},[t._v("#")]),t._v(" 5、服务部署")]),t._v(" "),a("p",[t._v("为了应对现在多变的客户需求，我们可能将前后端进行分离管理，每个端尽量使用不同的域名或者端口，并且每个项目中给定一个实例模板")]),t._v(" "),a("p",[t._v("比如：")]),t._v(" "),a("p",[t._v("laravel作为后端：admin_nginx.conf")]),t._v(" "),a("p",[t._v("后台管理端使用vue开发：web_nginx.conf")]),t._v(" "),a("p",[t._v("最后部署项目的时候，只需要根据业务结构图，将对应的模块正常启动即可。")]),t._v(" "),a("h1",{attrs:{id:"_6、数据备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、数据备份"}},[t._v("#")]),t._v(" 6、数据备份")]),t._v(" "),a("p",[t._v("使用定时任务每天备份以此数据库，保留最新的3份即可。")]),t._v(" "),a("h1",{attrs:{id:"_7、开发环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7、开发环境"}},[t._v("#")]),t._v(" 7、开发环境")]),t._v(" "),a("p",[t._v("window建议使用：laragon")]),t._v(" "),a("p",[t._v("Linux、mac： lnmp")]),t._v(" "),a("p",[t._v("在实际开发中应该规定好版本信息，比如")]),t._v(" "),a("p",[t._v("php:8.x")]),t._v(" "),a("p",[t._v("mysql: 5.7")]),t._v(" "),a("p",[t._v("redis:7.x")])])}),[],!1,null,null,null);s.default=e.exports}}]);